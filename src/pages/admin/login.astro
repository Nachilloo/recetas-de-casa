---
import Layout from '../../layouts/Layout.astro';
import LoginForm from '../../components/admin/LoginForm';

// Si ya está autenticado, redirigir al dashboard
const authHeader = Astro.request.headers.get('cookie') || '';
if (authHeader.includes('sb-')) {
  // Hay una sesión, verificar si es válida
  const { supabase } = await import('../../lib/supabase');
  const { data } = await supabase.auth.getSession();
  
  if (data.session) {
    return Astro.redirect('/admin/');
  }
}
---

<Layout>
  <LoginForm client:only="react" />
</Layout>

